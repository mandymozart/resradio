import styled from "@emotion/styled";
import React, { useRef } from "react";

const Container = styled.div`
    pointer-events: none;
.black {
    width: 100vw;
    height: 100vh;
}
`

const DVDAnimation = () => {
    let x = 0,
        y = 0,
        dirX = 1,
        dirY = 1;
    const speed = 2;
    const pallete = ["#0D0D0D", "#F8F8F8", "#5800FF", "#FFFD39"];
    const dvd = useRef()
    dvd.style.color = pallete[0];
    let prevColorChoiceIndex = 0;
    const black = useRef()
    const dvdWidth = dvd.clientWidth;
    const dvdHeight = dvd.clientHeight;

    function getNewRandomColor() {
        const currentPallete = [...pallete]
        currentPallete.splice(prevColorChoiceIndex, 1)
        const colorChoiceIndex = Math.floor(Math.random() * currentPallete.length);
        prevColorChoiceIndex = colorChoiceIndex < prevColorChoiceIndex ? colorChoiceIndex : colorChoiceIndex + 1;
        const colorChoice = currentPallete[colorChoiceIndex];
        return colorChoice;
    }
    function animate() {
        const screenHeight = document.body.clientHeight;
        const screenWidth = document.body.clientWidth;

        if (y + dvdHeight >= screenHeight || y < 0) {
            dirY *= -1;
            dvd.style.color = getNewRandomColor();
        }
        if (x + dvdWidth >= screenWidth || x < 0) {
            dirX *= -1;

            dvd.style.color = getNewRandomColor();
        }
        x += dirX * speed;
        y += dirY * speed;
        dvd.style.left = x + "px";
        dvd.style.top = y + "px";
        window.requestAnimationFrame(animate);
    }

    window.requestAnimationFrame(animate);

    return (<Container>
        <div ref={black}>

            <div id="dvd" ref={dvd}><svg width="440" height="220" viewBox="0 0 440 220" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M440 110C440 170.751 341.503 220 220 220C98.4974 220 0 170.751 0 110C0 49.2487 98.4974 0 220 0C341.503 0 440 49.2487 440 110Z" fill="currentColor" />
                <path d="M108.776 89V80.04H123.368V89H126.568V73C126.568 68.616 122.984 66.344 116.072 66.344C109.192 66.344 105.576 68.616 105.576 73V89H108.776ZM108.776 73.128C108.776 70.76 111.272 69.544 116.072 69.544C120.872 69.544 123.368 70.76 123.368 73.128V76.84H108.776V73.128ZM133.94 89V79.4H142.42C147.796 79.4 150.58 77.192 150.58 73C150.58 68.808 147.796 66.6 142.42 66.6H130.74V89H133.94ZM133.94 69.8H142.42C145.684 69.8 147.38 70.888 147.38 73C147.38 75.112 145.684 76.2 142.42 76.2H133.94V69.8ZM156.346 89V79.4H164.826C170.202 79.4 172.986 77.192 172.986 73C172.986 68.808 170.202 66.6 164.826 66.6H153.146V89H156.346ZM156.346 69.8H164.826C168.09 69.8 169.786 70.888 169.786 73C169.786 75.112 168.09 76.2 164.826 76.2H156.346V69.8ZM193.473 89V85.8H178.753V66.6H175.553V89H193.473ZM206.077 89V81.16L215.165 70.6V66.6H211.965V69.576L204.605 78.216H204.349L196.989 69.576V66.6H193.789V70.6L202.877 81.16V89H206.077ZM241.745 89L245.361 84.84H245.489L249.073 89H255.025L260.305 83.016V66.6H257.105V81.672L253.489 85.768H250.609L247.025 81.672V67.88H243.825V81.672L240.241 85.8H237.361L233.745 81.672V66.6H230.545V83.016L235.825 89H241.745ZM276.299 89V85.8H271.499V69.8H276.299V66.6H263.499V69.8H268.299V85.8H263.499V89H276.299ZM288.954 89V69.8H297.434V66.6H277.274V69.8H285.754V89H288.954ZM302.565 89V79.4H317.765V89H320.965V66.6H317.765V76.2H302.565V66.6H299.365V89H302.565ZM68.7174 127V119.16L77.8054 108.6V104.6H74.6054V107.576L67.2454 116.216H66.9894L59.6294 107.576V104.6H56.4294V108.6L65.5174 119.16V127H68.7174ZM91.1966 127.256C99.1646 127.256 103.293 123.32 103.293 115.8C103.293 108.28 99.1646 104.344 91.1966 104.344C83.2286 104.344 79.1006 108.28 79.1006 115.8C79.1006 123.32 83.2286 127.256 91.1966 127.256ZM91.1966 124.056C85.3406 124.056 82.3006 121.24 82.3006 115.8C82.3006 110.36 85.3406 107.544 91.1966 107.544C97.0526 107.544 100.093 110.36 100.093 115.8C100.093 121.24 97.0526 124.056 91.1966 124.056ZM123.178 127L127.786 121.592V104.6H124.586V120.248L121.61 123.832H112.362L109.386 120.248V104.6H106.186V121.592L110.794 127H123.178ZM151.783 111C151.783 106.808 148.999 104.6 143.623 104.6H131.943V127H135.143V117.4H143.399L148.263 123.224V127H151.463V122.104L147.175 116.984C150.215 116.152 151.783 114.136 151.783 111ZM143.623 107.8C146.887 107.8 148.583 108.888 148.583 111C148.583 113.112 146.887 114.2 143.623 114.2H135.143V107.8H143.623ZM179.259 127.256C187.227 127.256 191.355 123.32 191.355 115.8C191.355 108.28 187.227 104.344 179.259 104.344C171.291 104.344 167.163 108.28 167.163 115.8C167.163 123.32 171.291 127.256 179.259 127.256ZM179.259 124.056C173.403 124.056 170.363 121.24 170.363 115.8C170.363 110.36 173.403 107.544 179.259 107.544C185.115 107.544 188.155 110.36 188.155 115.8C188.155 121.24 185.115 124.056 179.259 124.056ZM205.448 127L209.064 122.84H209.192L212.776 127H218.728L224.008 121.016V104.6H220.808V119.672L217.192 123.768H214.312L210.728 119.672V105.88H207.528V119.672L203.944 123.8H201.064L197.448 119.672V104.6H194.248V121.016L199.528 127H205.448ZM250.37 127V104.632H247.17V123.8H243.97L240.898 120.088V110.328L236.098 104.6H228.162V126.968H231.362V107.8H234.562L237.666 111.544V121.272L242.434 127H250.37ZM285.158 127L288.454 123.32V117.848L285.222 114.2H272.614L270.982 112.376V109.624L272.614 107.8H283.782L286.086 110.552L288.134 108.088L285.222 104.6H271.142L267.782 108.44V113.56L271.174 117.4H283.75L285.254 119.032V122.136L283.686 123.8H271.174L269.126 121.272L267.014 123.768L269.638 127H285.158ZM295.174 127V117.4H310.374V127H313.574V104.6H310.374V114.2H295.174V104.6H291.974V127H295.174ZM328.884 127.256C336.852 127.256 340.98 123.32 340.98 115.8C340.98 108.28 336.852 104.344 328.884 104.344C320.916 104.344 316.788 108.28 316.788 115.8C316.788 123.32 320.916 127.256 328.884 127.256ZM328.884 124.056C323.028 124.056 319.988 121.24 319.988 115.8C319.988 110.36 323.028 107.544 328.884 107.544C334.74 107.544 337.78 110.36 337.78 115.8C337.78 121.24 334.74 124.056 328.884 124.056ZM355.073 127L358.689 122.84H358.817L362.401 127H368.353L373.633 121.016V104.6H370.433V119.672L366.817 123.768H363.937L360.353 119.672V105.88H357.153V119.672L353.569 123.8H350.689L347.073 119.672V104.6H343.873V121.016L349.153 127H355.073ZM379.707 127.544C380.923 127.544 381.979 126.52 381.979 125.336C381.979 124.088 380.923 123.064 379.707 123.064C378.523 123.064 377.467 124.088 377.467 125.336C377.467 126.52 378.523 127.544 379.707 127.544ZM172.374 165L170.054 162.28V156.536L172.374 153.8H177.974L180.006 156.2L179.382 156.952L177.51 154.76H172.838L171.014 156.888V161.928L172.838 164.04H177.67L179.542 161.832L180.166 162.6L178.134 165H172.374ZM182.093 165V153.8H183.053V164.04H189.773V165H182.093ZM190.738 165V164.04H193.138V154.76H190.738V153.8H196.498V154.76H194.098V164.04H196.498V165H190.738ZM200.577 165L198.257 162.28V156.536L200.577 153.8H206.177L208.209 156.2L207.585 156.952L205.713 154.76H201.041L199.217 156.888V161.928L201.041 164.04H205.873L207.745 161.832L208.369 162.6L206.337 165H200.577ZM217.848 165V162.44L215.672 159.88H210.68V158.92H215.672L217.368 156.952V153.8H218.328V157.304L216.584 159.336V159.464L218.808 162.088V165H217.848ZM210.296 165V153.8H211.256V165H210.296ZM228.577 165V153.8H229.537V158.92H237.137V153.8H238.097V165H237.137V159.88H229.537V165H228.577ZM240.655 165V153.8H248.975V154.76H241.615V158.6H248.175V159.56H241.615V164.04H248.975V165H240.655ZM251.061 165V153.8H256.261C257.392 153.8 258.245 154.072 258.821 154.616C259.408 155.16 259.701 155.955 259.701 157C259.701 158.045 259.408 158.84 258.821 159.384C258.245 159.928 257.392 160.2 256.261 160.2H252.021V165H251.061ZM258.581 165V162.92L256.037 159.88L257.237 159.8L259.541 162.552V165H258.581ZM256.261 159.24C257.072 159.24 257.685 159.053 258.101 158.68C258.528 158.296 258.741 157.736 258.741 157C258.741 156.264 258.528 155.709 258.101 155.336C257.685 154.952 257.072 154.76 256.261 154.76H252.021V159.24H256.261ZM261.78 165V153.8H270.1V154.76H262.74V158.6H269.3V159.56H262.74V164.04H270.1V165H261.78Z" fill="white" />
            </svg>
            </div>
        </div>
    </Container>)
}

export default DVDAnimation;